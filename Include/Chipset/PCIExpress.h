#ifndef __QCOM_PCI_EXPRESS_8994_H__
#define __QCOM_PCI_EXPRESS_8994_H__

#ifdef RP0
#define MSM_PCIE_RES_PARF 0xfc520000
#define MSM_PCIE_RES_PHY 0xfc526000
#define MSM_PCIE_RES_DM_CORE 0xff000000
#define MSM_PCIE_RES_ELBI 0xff000f20
#define MSM_PCIE_RES_CONF 0xff100000
#define MSM_PCIE_RES_IO 0xff200000
#define MSM_PCIE_RES_BAR 0xff300000
#else
#define MSM_PCIE_RES_PARF 0xfc528000
#define MSM_PCIE_RES_PHY 0xfc52e000
#define MSM_PCIE_RES_DM_CORE 0xf8800000
#define MSM_PCIE_RES_ELBI 0xf8800f20
#define MSM_PCIE_RES_CONF 0xf8801000
#define MSM_PCIE_RES_IO 0xf8880000
#define MSM_PCIE_RES_BAR 0xf8900000
#endif

#define MSM_PCIE_RES_IO_SIZE 0x80000
#define MSM_PCIE_BAR_SIZE 0x700000

#define PCIE_PHY_BIST_CHK_ERR_CNT_L 0x718
#define PCIE_PHY_BIST_CHK_ERR_CNT_H 0x71C
#define PCIE_PHY_BIST_CHK_STATUS 0x720
#define PCIE_PHY_LFPS_RXTERM_IRQ_SOURCE 0x724
#define PCIE_PHY_PCS_STATUS 0x728
#define PCIE_PHY_PCS_STATUS2 0x72C
#define PCIE_PHY_REVISION_ID0 0x730
#define PCIE_PHY_REVISION_ID1 0x734
#define PCIE_PHY_REVISION_ID2 0x738
#define PCIE_PHY_REVISION_ID3 0x73C
#define PCIE_PHY_DEBUG_BUS_0_STATUS 0x740
#define PCIE_PHY_DEBUG_BUS_1_STATUS 0x744
#define PCIE_PHY_DEBUG_BUS_2_STATUS 0x748
#define PCIE_PHY_DEBUG_BUS_3_STATUS 0x74C

#define PCIE_LINK_DOWN 0xFFFFFFFF

#define XMLH_LINK_UP 0x400
#define LINK_UP_CHECK_MAX_COUNT 20

#define PCIE20_ELBI_VERSION 0x00
#define PCIE20_ELBI_SYS_CTRL 0x04
#define PCIE20_ELBI_SYS_STTS 0x08

#define LINK_UP_TIMEOUT_US_MIN 5000
#define LINK_UP_TIMEOUT_US_MAX 5100

#define PCIE20_COMMAND_STATUS 0x04
#define PCIE20_HEADER_TYPE 0x0C
#define PCIE20_BUSNUMBERS 0x18
#define PCIE20_MEMORY_BASE_LIMIT 0x20
#define PCIE20_BRIDGE_CTRL 0x3C
#define PCIE20_L1SUB_CONTROL1 0x158
#define PCIE20_DEVICE_CONTROL_STATUS 0x78
#define PCIE20_DEVICE_CONTROL2_STATUS2 0x98

#define PCIE_TLP_RD_SIZE 0x5

#define PCIE20_PARF_SYS_CTRL 0x00
#define PCIE20_PARF_PM_STTS 0x24
#define PCIE20_PARF_PCS_DEEMPH 0x34
#define PCIE20_PARF_PCS_SWING 0x38
#define PCIE20_PARF_PHY_CTRL 0x40
#define PCIE20_PARF_PHY_REFCLK 0x4C
#define PCIE20_PARF_CONFIG_BITS 0x50
#define PCIE20_PARF_TEST_BUS 0xE4
#define PCIE20_PARF_DBI_BASE_ADDR 0x168
#define PCIE20_PARF_SLV_ADDR_SPACE_SIZE 0x16C
#define PCIE20_PARF_AXI_MSTR_WR_ADDR_HALT 0x178
#define PCIE20_PARF_LTSSM 0x1B0

#define PCIE20_PLR_IATU_VIEWPORT 0x900
#define PCIE20_PLR_IATU_CTRL1 0x904
#define PCIE20_PLR_IATU_CTRL2 0x908
#define PCIE20_PLR_IATU_LBAR 0x90C
#define PCIE20_PLR_IATU_UBAR 0x910
#define PCIE20_PLR_IATU_LAR 0x914
#define PCIE20_PLR_IATU_LTAR 0x918
#define PCIE20_PLR_IATU_UTAR 0x91c

/* Config Space Offsets */
#define BDF_OFFSET(bus, devfn) ((bus << 24) | (devfn << 16))

#define PCIE20_CTRL1_TYPE_CFG0 0x04
#define PCIE20_CTRL1_TYPE_CFG1 0x05

#define PCIE20_ACK_F_ASPM_CTRL_REG 0x70C
#define PCIE20_ACK_N_FTS 0xff00

#define PCIE20_CAP 0x70
#define PCIE20_CAP_DEVCTRLSTATUS (PCIE20_CAP + 0x08)
#define PCIE20_CAP_LINKCTRLSTATUS (PCIE20_CAP + 0x10)

#define PCIE_CAP_PTR_OFFSET 0x34
#define PCIE_EXT_CAP_OFFSET 0x100

#define MSM_PCIE_ERROR -1

#define PCIE20_CAP_ID 0x10
#define L1SUB_CAP_ID 0x1E

// Device-specific GPIO pins
#define MSM_PCIE_GPIO_PERST_PIN 35
#define MSM_PCIE_GPIO_WAKE_PIN 37
#define MSM_PCIE_GPIO_PERST_PIN_ON 1

// Reset-specific timing
#define PERST_PROPAGATION_DELAY_US_MIN 1000
#define PERST_PROPAGATION_DELAY_US_MAX 1005

// PHY Control
#define PCIE_PHY_POWER_DOWN_CONTROL 0x604

#define QSERDES_COM_PLL_VCOTAIL_EN 0x004
#define QSERDES_COM_IE_TRIM 0x00C
#define QSERDES_COM_IP_TRIM 0x010
#define QSERDES_COM_PLL_CNTRL 0x014
#define QSERDES_COM_PLL_IP_SETI 0x024
#define QSERDES_COM_PLL_CP_SETI 0x034
#define QSERDES_COM_PLL_IP_SETP 0x038
#define QSERDES_COM_PLL_CP_SETP 0x03C
#define QSERDES_COM_ATB_SEL2 0x044
#define QSERDES_COM_SYSCLK_EN_SEL_TXBAND 0x048
#define QSERDES_COM_RESETSM_CNTRL 0x04C
#define QSERDES_COM_RESETSM_CNTRL2 0x050
#define QSERDES_COM_PLLLOCK_CMP1 0x090
#define QSERDES_COM_PLLLOCK_CMP2 0x094
#define QSERDES_COM_PLLLOCK_CMP_EN 0x09C
#define QSERDES_COM_BGTC 0x0A0
#define QSERDES_COM_DEC_START1 0x0AC
#define QSERDES_COM_RES_CODE_START_SEG1 0x0E0
#define QSERDES_COM_RES_CODE_CAL_CSR 0x0E8
#define QSERDES_COM_RES_TRIM_CONTROL 0x0F0
#define QSERDES_COM_DIV_FRAC_START1 0x100
#define QSERDES_COM_DIV_FRAC_START2 0x104
#define QSERDES_COM_DIV_FRAC_START3 0x108
#define QSERDES_COM_DEC_START2 0x10C
#define QSERDES_COM_PLL_RXTXEPCLK_EN 0x110
#define QSERDES_COM_PLL_CRCTRL 0x114

#define QSERDES_RX_CDR_CONTROL1 0x400
#define QSERDES_RX_CDR_CONTROL_HALF 0x408
#define QSERDES_RX_UCDR_FO_GAIN 0x414
#define QSERDES_RX_UCDR_SO_GAIN 0x418
#define QSERDES_RX_UCDR_SO_SATURATION_AND_ENABLE 0x41C
#define QSERDES_RX_RX_EQ_GAIN1_LSB 0x4A8
#define QSERDES_RX_RX_EQ_GAIN1_MSB 0x4AC
#define QSERDES_RX_RX_EQ_GAIN2_LSB 0x4B0
#define QSERDES_RX_RX_EQ_GAIN2_MSB 0x4B4
#define QSERDES_RX_RX_EQU_ADAPTOR_CNTRL2 0x4BC
#define QSERDES_RX_RX_EQ_OFFSET_ADAPTOR_CNTRL1 0x4F0
#define QSERDES_RX_RX_OFFSET_ADAPTOR_CNTRL2 0x4F4
#define QSERDES_RX_SIGDET_ENABLES 0x4F8
#define QSERDES_RX_SIGDET_CNTRL 0x500
#define QSERDES_RX_SIGDET_DEGLITCH_CNTRL 0x504

#define QSERDES_TX_RCV_DETECT_LVL 0x268

#define PCIE_PHY_SW_RESET 0x600
#define PCIE_PHY_POWER_DOWN_CONTROL 0x604
#define PCIE_PHY_START 0x608
#define PCIE_PHY_ENDPOINT_REFCLK_DRIVE 0x648
#define PCIE_PHY_RX_IDLE_DTCT_CNTRL 0x64C
#define PCIE_PHY_POWER_STATE_CONFIG1 0x650
#define PCIE_PHY_POWER_STATE_CONFIG2 0x654

#define PHY_STABILIZATION_DELAY_US_MIN 995

#define PHY_READY_TIMEOUT_COUNT 10

#define REFCLK_STABILIZATION_DELAY_US_MIN 1000
#define REFCLK_STABILIZATION_DELAY_US_MAX 1005

#define MSM_PCIE_MSI_PHY 0xa0000000
#define PCIE20_MSI_CTRL_ADDR (0x820)
#define PCIE20_MSI_CTRL_UPPER_ADDR (0x824)
#define PCIE20_MSI_CTRL_INTR_EN (0x828)
#define PCIE20_MSI_CTRL_INTR_MASK (0x82C)
#define PCIE20_MSI_CTRL_INTR_STATUS (0x830)
#define PCIE20_MSI_CTRL_MAX 8

#define PCI_IO_BASE_UPPER16 0x30 /* Upper half of I/O addresses */
#define PCI_IO_LIMIT_UPPER16 0x32
#define PCI_PRIMARY_BUS 0x18       /* Primary bus number */
#define PCI_SECONDARY_BUS 0x19     /* Secondary bus number */
#define PCI_SUBORDINATE_BUS 0x1a   /* Highest bus number behind the bridge */
#define PCI_SEC_LATENCY_TIMER 0x1b /* Latency timer for secondary interface */
#define PCI_IO_BASE 0x1c           /* I/O range behind the bridge */

#define PCI_MEMORY_BASE 0x20 /* Memory range behind */
#define PCI_MEMORY_LIMIT 0x22

#endif